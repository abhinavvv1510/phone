<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Palak or Phone</title>
  <style>
    body {
      background-color: #fff8f0;
      text-align: center;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    h1 {
      margin-top: 20px;
      font-size: 3rem;
    }

    .emoji {
      position: absolute;
      font-size: 5rem;
      cursor: grab;
      user-select: none;
      transition: transform 0.2s ease;
    }

    #boy { top: 60%; left: 20%; }
    #girl { top: 60%; left: 60%; }
    #phone { top: 30%; left: 60%; }

    #heart {
      position: absolute;
      font-size: 2.5rem;
      display: none;
      z-index: 5;
    }

    .hugged {
      animation: hugbounce 0.5s ease-in-out infinite alternate;
    }

    @keyframes hugbounce {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }
  </style>
</head>
<body>

  <h1>Palak or Phone</h1>

  <div id="boy" class="emoji">üë¶</div>
  <div id="girl" class="emoji">üëß</div>
  <div id="phone" class="emoji">üì±</div>
  <div id="heart">‚ù§Ô∏è</div>

  <script>
    const boy = document.getElementById('boy');
    const girl = document.getElementById('girl');
    const phone = document.getElementById('phone');
    const heart = document.getElementById('heart');

    let offsetX, offsetY;
    let dragging = false;

    boy.addEventListener('mousedown', (e) => {
      dragging = true;
      offsetX = e.clientX - boy.offsetLeft;
      offsetY = e.clientY - boy.offsetTop;
      boy.style.cursor = 'grabbing';
    });

    document.addEventListener('mouseup', () => {
      dragging = false;
      boy.style.cursor = 'grab';
    });

    document.addEventListener('mousemove', (e) => {
      if (!dragging) return;

      const x = e.clientX - offsetX;
      const y = e.clientY - offsetY;

      boy.style.left = `${x}px`;
      boy.style.top = `${y}px`;

      const boyRect = boy.getBoundingClientRect();
      const girlRect = girl.getBoundingClientRect();
      const phoneRect = phone.getBoundingClientRect();

      // Girl proximity
      const distToGirl = Math.hypot(
        boyRect.left - girlRect.left,
        boyRect.top - girlRect.top
      );

      if (distToGirl < 100) {
        // Snap boy next to girl
        const girlX = girl.offsetLeft;
        const girlY = girl.offsetTop;
        boy.style.left = `${girlX - 60}px`;
        boy.style.top = `${girlY}px`;

        // Heart in between
        heart.style.display = 'block';
        heart.style.left = `${girlX - 25}px`;
        heart.style.top = `${girlY - 30}px`;

        boy.classList.add('hugged');
        girl.classList.add('hugged');
      } else {
        boy.classList.remove('hugged');
        girl.classList.remove('hugged');
        heart.style.display = 'none';
      }

      // Phone repels
      const distToPhone = Math.hypot(
        boyRect.left - phoneRect.left,
        boyRect.top - phoneRect.top
      );

      if (distToPhone < 120) {
        const dx = phoneRect.left - boyRect.left;
        const dy = phoneRect.top - boyRect.top;
        const angle = Math.atan2(dy, dx);
        const repelStrength = 100;

        const newX = phone.offsetLeft + Math.cos(angle) * repelStrength;
        const newY = phone.offsetTop + Math.sin(angle) * repelStrength;

        phone.style.left = `${Math.max(0, Math.min(window.innerWidth - phone.offsetWidth, newX))}px`;
        phone.style.top = `${Math.max(0, Math.min(window.innerHeight - phone.offsetHeight, newY))}px`;
      }
    });
  </script>
</body>
</html>
